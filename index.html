<!DOCTYPE html>
<html>
<head>
    <title>GCSegmentedArray Bug Demonstration</title>
</head>
<body>
<script>
(function() {
    // Function to create a scenario that triggers the bug
    function triggerBug() {
        // Create a large array to fill the GCSegmentedArray
        let arr = [];
        for (let i = 0; i < 100000; i++) {
            arr.push(i);
        }

        // Force garbage collection to empty the segments
        arr = null;

        // Perform operations that cause refill to be called
        // under conditions where m_numberOfSegments == 1 and m_top == 0
        // For example, manipulating regular expressions or large strings
        let pattern = /a*b*c*/;
        let str = 'abc'.repeat(1000000);
        pattern.test(str);
    }

    // Run the test and catch any potential errors
    try {
        triggerBug();
        console.log('Test completed without triggering the bug.');
    } catch (e) {
        console.error('Bug triggered:', e);
        alert('Bug triggered: ' + e);
    }
})();
</script>
</body>
</html>

